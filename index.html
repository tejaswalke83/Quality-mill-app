<body>
  <!-- Splash Logo -->
  <img src="/images/full logo.png" alt="Quality Mill Logo" class="logo" />

  <!-- Next Button (hidden initially) -->
  <button id="nextBtn" class="next-btn" style="display:none;">Next →</button>

  <!-- Styles for Next Button -->
  <style>
    .next-btn {
      position: absolute;
      bottom: 40px;
      background-color: #ffffff;
      color: #3c5882;
      border: none;
      padding: 12px 28px;
      border-radius: 30px;
      font-size: 18px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }

    .next-btn:hover {
      transform: translateY(-2px);
      background-color: #f4f4f4;
    }
  </style>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-messaging-compat.js"></script>

  <!-- Firebase + Push Logic -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBpQRge5ZLaNx_mM_vwQrwmm1f2LkyhOyY",
      authDomain: "qualityattamills.firebaseapp.com",
      projectId: "qualityattamills",
      storageBucket: "qualityattamills.firebasestorage.app",
      messagingSenderId: "737428044643",
      appId: "1:737428044643:web:a0f9ecfae3794e11e57156"
    };

    firebase.initializeApp(firebaseConfig);
    const messaging = firebase.messaging();

    async function requestNotificationPermission() {
      try {
        console.log("🔔 Requesting notification permission...");
        const permission = await Notification.requestPermission();

        if (permission === "granted") {
          console.log("✅ Notification permission granted");

          const fcmToken = await messaging.getToken({
            vapidKey: "YOUR_WEB_PUSH_CERTIFICATE_KEY_PAIR_FROM_FIREBASE"
          });

          if (fcmToken) {
            console.log("📱 FCM Token received:", fcmToken);
            localStorage.setItem("fcm_token", fcmToken);
          } else {
            console.warn("⚠️ No FCM token received yet.");
          }
        } else {
          console.warn("🚫 Notification permission denied.");
        }
      } catch (error) {
        console.error("❌ Error during notification setup:", error);
      } finally {
        // ✅ Show Next button once process completes
        document.getElementById("nextBtn").style.display = "block";
      }
    }

    document.addEventListener("DOMContentLoaded", requestNotificationPermission);

    // Handle next button click
    document.getElementById("nextBtn").addEventListener("click", () => {
      const logo = document.querySelector('.logo');
      logo.classList.add('fade-out');
      setTimeout(() => {
        window.location.href = "user-registration.html";
      }, 500);
    });
  </script>
</body>
